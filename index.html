<!DOCTYPE HTML>

<head>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <div class="wrapper">
        <div class="entry">
            <form>
                <input type="radio" name="0" value="1"> John Doe<br />
                <input type="radio" name="0" value="2"> Jane Doe<br />
                <button type="button" onclick="vote(0)">Vote</button>
            </form>
        </div>
        <div class="entry">
            <form>
                <input type="radio" name="1" value="1"> John Doe<br />
                <input type="radio" name="1" value="2"> Jane Doe<br />
                <button type="button" onclick="vote(1)">Vote</button>
            </form>
        </div>
    </div>
    <script type="text/javascript">
        function vote(entry) {
            var radios = document.querySelectorAll('input[type="radio"]:checked');
            if (radios.length > 0) {
                alert("voted");
            } else {
                return alert("please vote");
            }

            var xhr = new XMLHttpRequest();
            var value;
            var choices = document.getElementsByName(entry);
            console.log(choices);
            if (choices[0].checked) {
                value = 0;
            } else {
                value = 1;
            }

            var post = {
                id: entry,
                value: value
            }

            var json = JSON.stringify(post);
            console.log(`req body: ${json}`);
            xhr.open("POST", "/vote/");
            xhr.setRequestHeader("content-type", "application/json");
            xhr.send(json);
        }

        function getVotes(entry) {
            var xhr = new XMLHttpRequest();
        }

    </script>
</body>


t87zcedhj7o1
?-Y}C,acM:6

U=&m-G~[N9i5
